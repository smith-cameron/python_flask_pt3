[FORMs](https://login.codingdojo.com/m/506/12467/87470) and request/response methods
Up to this point, we have just been working with GET requests that display information from the server to the user. 
### GET requests ask for the resource(form.html) to be returned
```python
@app.route('/render_form')
def render_form():
    return render_template("form.html")
```
What if a request involves the client sending information to the server? 
The modern internet is user-driven; much of the actual content of a website is generated by the users of a website. How does a user provide content to a website? 
One word: __forms.__
### **POST** requests 
are used to make a submission to the resource. 
This type of request would typically ask the server to store new information, for example by writing it to a database or getting it based on session info.
- Logging in or registering would be an example of a POST request.
- Typically(as far as we’re concerned) a POST will be redirected to a GET
	- This is enforced in flask
### The form(.html)
```python
{# action - url the form will be submitted to #} 
{# method is the request method in which it will be sent #} 
{# we'll want this to be a POST request #}
<form action="/users/create" method="post" class="inputForm">
  <div class="formGroup">
    <label for="name">Name:</label>
    <input type="text" name="name" />
    {# type options are important for: #} 
    {# use input types to facilitate user interaction #} 
    {# and assist in sanatizing data #}
  </div>
  <div class="formGroup">
    <label for="email">Email:</label>
    <input type="email" name="email" />
    {# name attributes are how we will identify one field from another #} 
    {# Each element should have a UNIQUE name attribute #}
  </div>
  <div class="formGroup">
    <label for="age">Age:</label>
    <input type="number" name="age" />
  </div>
  <div class="formGroup">
    <label for="birthday">Birthday:</label>
    <input type="date" name="user_birthday" />
  </div>
  <div class="formGroup">
    <label for="password">Password:</label>
    <input type="password" name="user_password" />
  </div>
  {# a way to submit the form #}
  <!-- <input type='submit' value='create user'> -->
  <button>Submit</button>
</form>
```
#### action 
This is the route that will process or “catch”  the form info
- !not the one that shows the form--that's the get route!
#### method
Our options are GET and POST but since we need to send data; 
- __we'll want this to be a POST request__
- ==singular!!== `method=`
#### input elements
These are the parts of the form that 
- actually gather data from the user. 
- Can be any form element not only input, like select (dropdowns) and textarea.
- Each element should have a unique name attribute. ==IMPORTANT==
	- name attribute options are how we will identify one field from another in our server
- type options are important.
For example we can use date and email and password for different functionality
```html
<h3>Email: <input type='email' name='email'></h3>        
<h3>Password: <input type='password' name='password'></h3>
<h3>Birthday: <input type='date' name='birthday'></h3>
```
a way to submit the form(don't forget to submit)
```html
<input type='submit' value='Create Account'>
<!-- OR -->
<button>Create Account</button>
```

---
## Accessing post request objects
Import **request**
```python
from flask import render_template, request
```
Create post route
```python
@app.route('/form', methods=['post'])
def formPost(): 
  print("Post Route")
  return redirect('/theform')
```
You will need `methods=['POST']`(==PLURAL== )  in your `@app.route()` endpoint
```python
print(f"Post Route: {request.form}")
print(f"Post Route: {request.form['first_name']}")
```
access data that was input via the `request.form` immutable multi-dict
- `dictionary[‘name_of_the_key’]` == `request.form[‘name_of_the_input’]`
---
## Redirecting
WHY? besides taking the user where we want them to go...
we should never render a template on a POST request.  If we do, then it could result in:
- Duplication of Data in your application.
- Over-Charging Credit Cards ( if processing payments ).
	- BASICALLY avoid data being handled more than once
	- most browsers do the whole "are you suuuure you want to do this?"
Import __redirect__
```python
from flask import render_template, request, redirect
```
`redirect()` function takes in a string (URL) to a __GET__ method
```python
return redirect('/theform')
```
- Due to statelessness of request response cycle request.form will carry no values after the redirect
```python
print(f"Get Route: {request.form}") #after form submission
```
routes are independent of each other

---
## Session
[Session - Platform](https://login.codingdojo.com/m/506/12467/87473)
A form of persistent data storage that outlives the process that generated it. 
This data is called **state**.
Some frameworks, including Flask, use cookies to store session data. Flask uses secure hashing of session data to send a packet of information from server to client. This packet is known as a cookie. 
Once a client's browser has received this cookie, it writes the information contained in it to a small file on their hard drive
Session data is stored at the top of the cookie, and the server signs it in encrypted mode. For this encryption, the Flask application requires you to define a SECRET_KEY
**While hashed, cookies are not incredibly secure, so don't save anything private in them.**

Import `session`
```python
from flask import render_template, request, redirect, session
```
Think of session as a browser based dictionary of key value pairs
Session can:
- Record whether there is a user logged in (developer action) 
- Who that current user is (developer action)
- What links a user has viewed previously (browser action)
- accessible from anywhere (HTML/Server etc)
	- anywhere you import `session` essentially
ADD `app.secret_key = 'something..literally anything'`
### Saving form data to session
```python
session['fname'] =  request.form['first_name']
session['lname'] =  request.form['last_name']
session['email'] =  request.form['email']
session['password'] =  request.form['password']
session['birthday'] =  request.form['birthday']
```
HTML
```html
<h1 id="head">Display Page</h1>
<h3>Name: {{session['username']}}</h3>
<h3>Email: {{session['useremail']}}</h3>
<h3>Email: {{session['userpassword']}}</h3>
```
### Clearing Session
```python
@app.route('/logout')
def sessionReset():
	session.clear()
	  # clear one specific value
	  # session.pop('desired_key')
	return redirect("/")
```

---
## Hidden Inputs
[Hidden Inputs - Platform](https://login.codingdojo.com/m/506/12467/87477)